(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2741f902"],{"11e9":function(t,e,n){var r=n("52a7"),a=n("4630"),o=n("6821"),s=n("6a99"),i=n("69a8"),c=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=o(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(i(t,e))return a(!r.f.call(t,e),t[e])}},"132d":function(t,e,n){"use strict";n("44dc");var r,a=n("b64a"),o=n("2b0e"),s=o["a"].extend({name:"sizeable",props:{large:Boolean,medium:Boolean,size:{type:[Number,String]},small:Boolean,xLarge:Boolean}}),i=n("6a18"),c=n("80d2"),l=n("58df"),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function m(t){return["fas","far","fal","fab"].some(function(e){return t.includes(e)})}(function(t){t["small"]="16px",t["default"]="24px",t["medium"]="28px",t["large"]="36px",t["xLarge"]="40px"})(r||(r={}));var d=Object(l["a"])(a["a"],s,i["a"]).extend({name:"v-icon",props:{disabled:Boolean,left:Boolean,right:Boolean},methods:{getIcon:function(){var t="";return this.$slots.default&&(t=this.$slots.default[0].text.trim()),Object(c["j"])(this,t)},getSize:function(){var t={small:this.small,medium:this.medium,large:this.large,xLarge:this.xLarge},e=Object(c["i"])(t).find(function(e){return t[e]});return e&&r[e]||Object(c["a"])(this.size)},getDefaultData:function(){var t={staticClass:"v-icon",class:{"v-icon--disabled":this.disabled,"v-icon--left":this.left,"v-icon--link":this.$listeners.click||this.$listeners["!click"],"v-icon--right":this.right},attrs:u({"aria-hidden":!0},this.$attrs),on:this.$listeners};return t},applyColors:function(t){t.class=u({},t.class,this.themeClasses),this.setTextColor(this.color,t)},renderFontIcon:function(t,e){var n=[],r=this.getDefaultData(),a="material-icons",o=t.indexOf("-"),s=o<=-1;s?n.push(t):(a=t.slice(0,o),m(a)&&(a="")),r.class[a]=!0,r.class[t]=!s;var i=this.getSize();return i&&(r.style={fontSize:i}),this.applyColors(r),e("i",r,n)},renderSvgIcon:function(t,e){var n=this.getDefaultData();n.class["v-icon--is-component"]=!0;var r=this.getSize();r&&(n.style={fontSize:r,height:r}),this.applyColors(n);var a=t.component;return n.props=t.props,n.nativeOn=n.on,e(a,n)}},render:function(t){var e=this.getIcon();return"string"===typeof e?this.renderFontIcon(e,t):this.renderSvgIcon(e,t)}});e["a"]=o["a"].extend({name:"v-icon",$_wrapperFor:d,functional:!0,render:function(t,e){var n=e.data,r=e.children,a="";return n.domProps&&(a=n.domProps.textContent||n.domProps.innerHTML||a,delete n.domProps.textContent,delete n.domProps.innerHTML),t(d,n,a?[a]:r)}})},"3b2b":function(t,e,n){var r=n("7726"),a=n("5dbc"),o=n("86cc").f,s=n("9093").f,i=n("aae3"),c=n("0bfb"),l=r.RegExp,u=l,m=l.prototype,d=/a/g,p=/a/g,f=new l(d)!==d;if(n("9e1e")&&(!f||n("79e5")(function(){return p[n("2b4c")("match")]=!1,l(d)!=d||l(p)==p||"/a/i"!=l(d,"i")}))){l=function(t,e){var n=this instanceof l,r=i(t),o=void 0===e;return!n&&r&&t.constructor===l&&o?t:a(f?new u(r&&!o?t.source:t,e):u((r=t instanceof l)?t.source:t,r&&o?c.call(t):e),n?this:m,l)};for(var h=function(t){t in l||o(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},v=s(u),g=0;v.length>g;)h(v[g++]);m.constructor=l,l.prototype=m,n("2aba")(r,"RegExp",l)}n("7a56")("RegExp")},"44dc":function(t,e,n){},"5dbc":function(t,e,n){var r=n("d3f4"),a=n("8b97").set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&r(o)&&a&&a(t,o),t}},"8b97":function(t,e,n){var r=n("d3f4"),a=n("cb7c"),o=function(t,e){if(a(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},"8d9e":function(t,e,n){},9093:function(t,e,n){var r=n("ce10"),a=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},a481:function(t,e,n){"use strict";var r=n("cb7c"),a=n("4bf8"),o=n("9def"),s=n("4588"),i=n("0390"),c=n("5f1b"),l=Math.max,u=Math.min,m=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,function(t,e,n,h){return[function(r,a){var o=t(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,o,a):n.call(String(o),r,a)},function(t,e){var a=h(n,t,this,e);if(a.done)return a.value;var m=r(t),d=String(this),p="function"===typeof e;p||(e=String(e));var g=m.global;if(g){var _=m.unicode;m.lastIndex=0}var y=[];while(1){var b=c(m,d);if(null===b)break;if(y.push(b),!g)break;var I=String(b[0]);""===I&&(m.lastIndex=i(d,o(m.lastIndex),_))}for(var x="",C=0,S=0;S<y.length;S++){b=y[S];for(var $=String(b[0]),E=l(u(s(b.index),d.length),0),N=[],w=1;w<b.length;w++)N.push(f(b[w]));var k=b.groups;if(p){var M=[$].concat(N,E,d);void 0!==k&&M.push(k);var O=String(e.apply(void 0,M))}else O=v($,d,E,N,k,e);E>=C&&(x+=d.slice(C,E)+O,C=E+$.length)}return x+d.slice(C)}];function v(t,e,r,o,s,i){var c=r+t.length,l=o.length,u=p;return void 0!==s&&(s=a(s),u=d),n.call(i,u,function(n,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":i=s[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>l){var d=m(u/10);return 0===d?n:d<=l?void 0===o[d-1]?a.charAt(1):o[d-1]+a.charAt(1):n}i=o[u-1]}return void 0===i?"":i})}})},aa77:function(t,e,n){var r=n("5ca1"),a=n("be13"),o=n("79e5"),s=n("fdef"),i="["+s+"]",c="​",l=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),m=function(t,e,n){var a={},i=o(function(){return!!s[t]()||c[t]()!=c}),l=a[t]=i?e(d):s[t];n&&(a[n]=l),r(r.P+r.F*i,"String",a)},d=m.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=m},b893:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o});n("c5f6"),n("3b2b"),n("a481");var r=n("c0d6");function a(t){t=t.replace(/-/g,"/");for(var e=Math.round(Date.parse(t)/1e3),n=Math.round(new Date/1e3)-e,r=["年","个月","星期","天","小时","分钟","秒"],a=[31536e3,2592e3,604800,86400,3600,60,1],o=0;o<=6;o++){var s=Math.floor(n/a[o]);if(0!=s)return s+r[o]+"前"}}var o={rn2htmlbr:function(t){return t=t.replace(/\r\n/g,"<br/>"),t=t.replace(/\n/g,"<br/>"),t},ossPath:function(t,e,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t.replace(new RegExp(/(-)/g),"").substr(0,6),s="/articles/".concat(o,"/").concat(e,"/").concat(n);return a&&(s=r["a"].getters.config.oss_host+s),s},avatarPath:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=Number(t);var n="";if(t<100)n="".concat(r["a"].getters.config.oss_host,"/avatar/").concat(t,".png");else{var a=1e3*Math.floor(t/1e3);n="".concat(r["a"].getters.config.oss_host,"/avatar/").concat(a,"/").concat(t,".png")}return n+="?x-oss-process=style/"+(e?"thumb100_100":"avatar"),t>100&&t==r["a"].getters.session.avatar&&(n+="&v="+r["a"].getters.session.time),n},AliOssThumb:{avatar:"?x-oss-process=style/avatar",video:"?x-oss-process=video/snapshot,t_1000,m_fast",img1:"?x-oss-process=style/thumb300_180",img2:"?x-oss-process=style/thumb150_120",img3:"?x-oss-process=style/thumb100_100"},_ImagesGridStyle:{img1:null,img2:null,img3:null},imageStyle:function(t){if(t=Math.min(3,t),null===this._ImagesGridStyle["img"+t]){var e=r["a"].getters.device.width;e=e-40-3*(t-1),e=Math.floor(e/t);var n=e;2===t&&(n=Math.floor(.8*n)),1===t&&(n=Math.floor(.6*n)),this._ImagesGridStyle["img"+t]={width:e+"px",height:n+"px"}}return this._ImagesGridStyle["img"+t]},durationString:function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60,a="";return e>0&&(a+="".concat(e,":")),a+=n<10?"0".concat(n,":"):"".concat(n,":"),a+=r<10?"0".concat(r):"".concat(r),a}}},c5f6:function(t,e,n){"use strict";var r=n("7726"),a=n("69a8"),o=n("2d95"),s=n("5dbc"),i=n("6a99"),c=n("79e5"),l=n("9093").f,u=n("11e9").f,m=n("86cc").f,d=n("aa77").trim,p="Number",f=r[p],h=f,v=f.prototype,g=o(n("2aeb")(v))==p,_="trim"in String.prototype,y=function(t){var e=i(t,!1);if("string"==typeof e&&e.length>2){e=_?e.trim():d(e,3);var n,r,a,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+e}for(var s,c=e.slice(2),l=0,u=c.length;l<u;l++)if(s=c.charCodeAt(l),s<48||s>a)return NaN;return parseInt(c,r)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(g?c(function(){v.valueOf.call(n)}):o(n)!=p)?s(new h(y(e)),n,f):y(e)};for(var b,I=n("9e1e")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;I.length>x;x++)a(h,b=I[x])&&!a(f,b)&&m(f,b,u(h,b));f.prototype=v,v.constructor=f,n("2aba")(r,p,f)}},e62a:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nj-comments"},[n("div",{staticClass:"comments-list"},[t.comments.length<=0?n("div",{staticClass:"comments-empty"},[t._v("还没有人评论过。。。")]):t._e(),t._l(t.comments,function(e){return n("div",{key:e.Id,staticClass:"comment"},[n("img",{staticClass:"comments-avatar",attrs:{src:t.converter.avatarPath(e.avatar),alt:""}}),t._o(n("div",{staticClass:"comment-user"},[e.uid==t.authorId?n("span",{staticClass:"comment-author"},[t._v("作者")]):n("span",[t._v(t._s(e.uname))]),t._v("\n         ● "+t._s(t.converter.passTimeFormat(e.writetime))+"\n      ")]),0,e.Id),n("div",{staticClass:"comment-content",on:{click:function(n){return t.func_reply({parentId:e.Id,replyId:e.Id,replyTo:e.uname})}}},["1"===e.status?n("span",{domProps:{innerHTML:t._s(t.converter.rn2htmlbr(e.content))}}):n("span",[t._v("评论内容已被系统屏蔽！")])]),n("div",{staticClass:"comment-vote"},[n("v-btn",{attrs:{flat:"",icon:"",ripple:!1},on:{click:function(n){return t.func_vote(e,"voteup")}}},[n("v-icon",{attrs:{color:"voteup"===e.voted?"red":"#a2a2a2"}},[t._v("thumb_up_alt")]),t._v("\n          "+t._s(e.voteup)+"\n        ")],1)],1),t._l(e.comments,function(e){return n("div",{key:e.Id,staticClass:"subcomment"},[n("img",{staticClass:"subcomment-avatar",attrs:{src:t.converter.avatarPath(e.avatar),alt:""}}),t._o(n("div",{staticClass:"comment-user"},[e.uid==t.authorId?n("span",{staticClass:"comment-author"},[t._v("作者")]):n("span",[t._v(t._s(e.uname))]),"0"!==e.reply_id?n("span",{staticClass:"comment-reply"},[t._v("@\n            "),e.reply_uid==t.authorId?n("span",{staticClass:"comment-author"},[t._v("作者")]):n("span",[t._v(t._s(e.reply_name))])]):t._e(),t._v("\n          ● "+t._s(t.converter.passTimeFormat(e.writetime))+"\n        ")]),1,e.Id),n("div",{staticClass:"comment-content",on:{click:function(n){return t.func_reply({parentId:e.parent_id,replyId:e.Id,replyTo:e.uname})}}},["1"===e.status?n("span",{domProps:{innerHTML:t._s(t.converter.rn2htmlbr(e.content))}}):n("span",[t._v("评论内容已被系统屏蔽！")])]),n("div",{staticClass:"comment-vote"},[n("v-btn",{attrs:{flat:"",icon:"",ripple:!1},on:{click:function(n){return t.func_vote(e,"voteup")}}},[n("v-icon",{attrs:{color:"voteup"===e.voted?"red":"#a2a2a2"}},[t._v("thumb_up_alt")]),t._v("\n            "+t._s(e.voteup)+"\n          ")],1)],1)])}),0!=e.hasmore&&e.comments&&e.comments.length>=10?n("div",{staticClass:"comment-loadmore",on:{click:function(n){return t.loadSubComments(e)}}},[n("span",[t._v("展开更多")])]):t._e()],2)}),t.loadmore?n("div",{staticClass:"comment-loadmore",staticStyle:{margin:"20px 0"},on:{click:function(e){return t.loadComments()}}},[n("span",[t._v("更多评论")])]):t._e()],2)])},a=[],o=(n("c5f6"),n("8336")),s=n("132d"),i=n("b893"),c=(n("8d9e"),{components:{VBtn:o["a"],VIcon:s["a"]},props:{targetId:{type:[Number,String],default:0},authorId:{type:[Number,String],default:0}},data:function(){return{comments:[],loadmore:!1,islogin:!1,converter:i["a"],query:{page:1},reply:{parentId:0,replyId:0,content:""}}},created:function(){this.converter.passTimeFormat=i["b"],this.islogin=this.$store.getters.session.uid>0,this.loadComments()},methods:{loadComments:function(t){var e=this;t&&(this.query.page=t),1==this.query.page&&(this.comments=[]),this.$Ajax({method:"get",url:"/comments/",params:{target_id:this.targetId,page:this.query.page}}).then(function(t){1==t.data.ret&&(e.comments=e.comments.concat(t.data.comments),e.query.page++,e.loadmore=t.data.comments.length>=10),e.$emit("onLoaded")}).catch(function(t){e.$emit("onError",t)})},loadSubComments:function(t){var e=this,n=t.comments[t.comments.length-1].Id;this.$Ajax({method:"get",url:"/comments/sub",params:{target_id:this.targetId,parent_id:t.Id,last_id:n}}).then(function(e){1==e.data.ret&&(t.comments=t.comments.concat(e.data.comments),e.data.comments.length<10&&(t.hasmore=!1))}).catch(function(t){e.$emit("onError",t)})},func_reply:function(t){var e=t.parentId,n=t.replyId,r=t.replyTo;this.islogin?(this.reply.parentId=e,this.reply.replyId=n,this.$emit("onReply",r)):this.$emit("onError","登录后回复")},func_vote:function(t,e){var n=this;t.voted||this.$Ajax({method:"post",url:"/comments/vote",data:{commentId:t.Id,cmd:e}}).then(function(){t.voted=e,t[e]++}).catch(function(t){n.$emit("onError",t)})},postComment:function(t,e){var n=this;this.reply.content=t,this.islogin&&""!==this.reply.content&&(!0===e&&(this.reply.parentId=0,this.reply.replyId=0),this.$Ajax({method:"post",url:"/comments/",data:{target_id:this.targetId,parent_id:this.reply.parentId,reply_id:this.reply.replyId,content:this.reply.content}}).then(function(t){1==t.data.ret?(n.reply.parentId=0,n.reply.replyId=0,n.reply.content="",n.loadComments(1),n.$emit("onPosted",n.targetId)):n.$emit("onError",t.data.msg)}).catch(function(t){"Invalid token - expired"===t.response.data.msg?n.$emit("onError","token-expired"):n.$emit("onError","回复评论出错了:"+t)}))}}}),l=c,u=n("2877"),m=Object(u["a"])(l,r,a,!1,null,null,null);e["a"]=m.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);